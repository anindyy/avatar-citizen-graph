(this["webpackJsonpavatar-citizen-graph"]=this["webpackJsonpavatar-citizen-graph"]||[]).push([[0],{126:function(e,a,t){},127:function(e,a,t){},131:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(6),l=t.n(i),d=(t(95),t(31)),c=t(32),o=t(15),s=t(37),h=t(35),u=t(164),m=t(165),p=(t(96),function(e){Object(s.a)(n,e);var a=Object(h.a)(n);function n(e){var t;return Object(d.a)(this,n),(t=a.call(this,e)).state={userInput:"",payload:""},t.handleChange=t.handleChange.bind(Object(o.a)(t)),t.handleClick=t.handleClick.bind(Object(o.a)(t)),t}return Object(c.a)(n,[{key:"saveData",value:function(e){e.id!==this.state.payload.id&&this.setState({payload:e}),this.props.onPayloadChange(e)}},{key:"handleChange",value:function(e){this.setState({userInput:e.target.value})}},{key:"handleClick",value:function(e){var a=this;t(62).default.get("".concat("https://avatar.labpro.dev/friends/").concat(this.state.userInput)).then((function(e){console.log(e),a.saveData(e.data.payload)})).catch((function(e){return a.saveData("error")}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("div",{className:"form"},r.a.createElement(u.a,{label:"Citizen ID",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",size:"small",onChange:this.handleChange}),r.a.createElement(m.a,{variant:"contained",size:"medium",color:"primary",disableElevation:!0,onClick:this.handleClick},"Map Friends")))}}]),n}(r.a.Component)),f=t(81),v={height:2e3,width:2e3,nodeHighlightBehavior:!0,highlightOpacity:.5,d3:{alphaTarget:.05,gravity:-100,linkLength:100,linkStrength:1},node:{labelProperty:"name"},link:{highlightColor:"#828282"}};function g(e,a){var t=e.filter((function(e,a,t){return t.findIndex((function(a){return a.id===e.id}))===a})),n=t.map((function(e){return e.id})).indexOf(a);return n>-1&&t.splice(n,1),t}function k(e){var a="";switch(e.element){case"fire":a="#ff6512";break;case"water":a="#41a5f2";break;case"air":a="#b4cecf";break;case"earth":a="#29c434";break;default:a="#3b3b3b"}return{color:a,id:e.id,name:e.name}}function b(e,a){return{source:e.id,target:a.id}}t(126);var y=function(e){Object(s.a)(n,e);var a=Object(h.a)(n);function n(e){var t;return Object(d.a)(this,n),(t=a.call(this,e)).state={error:!1,id:"0",expanded:[],graph:{},clicked:{}},t.handleNodeClick=t.handleNodeClick.bind(Object(o.a)(t)),t.rearrangeNode=t.rearrangeNode.bind(Object(o.a)(t)),t}return Object(c.a)(n,[{key:"handleNodeClick",value:function(e){var a,n,r=this;if(-1===this.state.expanded.indexOf(e)){t(62).default.get("".concat("https://avatar.labpro.dev/friends/").concat(e)).then((function(t){var i=function(e,a){var t=g(e.friends),n=t.map((function(a){return b(e,a)})),r=a.nodes.map((function(e){return e.id}));return t.forEach((function(e,a){var n=t[a].id;r.indexOf(n)>-1&&t.splice(a,1)})),-1===r.indexOf(e.id)&&t.push({id:e.id,name:e.name,element:e.element}),{nodes:t.map(k).concat(a.nodes),links:n.concat(a.links)}}(t.data.payload,r.state.graph);a=i.nodes,n=i.links;var l=r.state.expanded;l.push(e),r.setState({error:!1,id:r.state.id,expanded:l,graph:{nodes:a,links:n},clicked:{id:t.data.payload.id,name:t.data.payload.name,element:t.data.payload.element}})})).catch((function(e){r.setState({error:!0})}))}else{var i=this.state.graph.nodes.map((function(e){return e.id})).indexOf(e),l=this.state.graph.nodes[i],d="";switch(l.color){case"#ff6512":d="fire";break;case"#41a5f2":d="water";break;case"#b4cecf":d="air";break;case"#29c434":d="earth";break;default:d=""}this.setState({error:!1,id:this.state.id,expanded:this.state.expanded,graph:this.state.graph,clicked:{id:l.id,name:l.name,element:d}})}}},{key:"rearrangeNode",value:function(){this.forceUpdate()}},{key:"render",value:function(){return this.props.data?this.state.error?r.a.createElement("div",{className:"errMessage"},r.a.createElement("b",null,"um, something went wrong.")):r.a.createElement("div",{className:"result-wrapper"},r.a.createElement("div",{className:"result-text"},r.a.createElement("div",null,r.a.createElement("strong",null,"ID: "),this.state.clicked.id),r.a.createElement("div",null,r.a.createElement("strong",null,"Name: "),this.state.clicked.name),r.a.createElement("div",null,r.a.createElement("strong",null,"Element: "),this.state.clicked.element),r.a.createElement(m.a,{size:"small",color:"primary",onClick:this.rearrangeNode},"Rearrange Nodes")),r.a.createElement("div",{className:"result-graph"},r.a.createElement(f.Graph,{id:"G".concat(this.state.id),data:this.state.graph,config:v,onClickNode:this.handleNodeClick}))):null}}],[{key:"getDerivedStateFromProps",value:function(e,a){if(!e.data||"error"===e.data)return{error:!0};if(e.data.id!==a.id){var t=function(e){var a=g(e.friends,e.id),t=a.map((function(a){return b(e,a)}));return a.push({id:e.id,name:e.name,element:e.element}),{nodes:a.map(k),links:t}}(e.data),n=t.nodes,r=t.links;return{error:!1,id:e.data.id,expanded:[e.data.id],graph:{nodes:n,links:r},clicked:{id:e.data.id,name:e.data.name,element:e.data.element}}}return a}}]),n}(r.a.Component),C=(t(127),function(e){Object(s.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).state={payload:""},n.handlePayloadChange=n.handlePayloadChange.bind(Object(o.a)(n)),n}return Object(c.a)(t,[{key:"handlePayloadChange",value:function(e){this.setState({payload:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p,{onPayloadChange:this.handlePayloadChange}),r.a.createElement(y,{data:this.state.payload}))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(128);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e,a,t){e.exports=t(131)},95:function(e,a,t){},96:function(e,a,t){}},[[90,1,2]]]);
//# sourceMappingURL=main.9bfabdf0.chunk.js.map